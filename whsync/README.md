# hotel



# Таблицы
### Таблица персонала (EmployeeSync)
Данная таблица хранит данные о персонале.  

| Название столбца | Тип данных  | Описание                                                 |
|:----------------:|:-----------:|:---------------------------------------------------------|
|   employee_id    |     INT     | Индивидуальный номер сотрудника                          |
|       name       |   VARCHAR   | Фамилия Имя Отчество (ФИО)                               |
|      phone       |   VARCHAR   | Номер телефона                                           |
|      email       |   VARCHAR   | Электронная почта                                        |
|   position_id    |  SMALLINT   | Индивидуальный номер должности                           |
|      reward      |   NUMERIC   | Дополнительное денежное вознаграждение (премия)          |
|    is_deleted    |   BOOLEAN   | Уволен ли сотрудник (TRUE - да, FALSE - нет)             |
|   ch_employee    |     INT     | Индивидуальный номер сотрудника, который изменяет запись |
|      dt_ch       | TIMESTAMPTZ | Дата изменения записи                                    |
|     dt_sync      | TIMESTAMPTZ | Дата экспорта в синке                                    |


# Функции
### Добавления сотрудника (EmployeeUpd)
```sql
SELECT hotel.employeeupd(_src := '
                         {
                           "name": "Лазарева Карина Витальевна",
                           "phone": "89221441235",
                           "email": "sh4@gmail.com",
                           "position_id": 6,
                           "reward": 5000,
                           "is_deleted": false
                         }
                         ', _ch_employee := 2);
```
Пример ответа при правильном выполнении:
```jsonb
{"data" : null}
```
Примеры ошибок:
```jsonb 
{
	"errors": [
	    {
		    "error": "hotel.employee_ins.phone_exists",
		    "detail": "phone = 89221441263",
		    "message": "Такой номер телефона уже принадлежит другому пользователю!"
	    }
	]
}
```