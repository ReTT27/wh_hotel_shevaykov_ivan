# dictionary



# Таблицы
### Таблица должностей (Position)
Данная таблица хранит данные о должностях в отеле.

| Название столбца | Тип данных | Описание                       |
|:----------------:|:----------:|:-------------------------------|
|   position_id    |  SMALLINT  | Индивидуальный номер должности |
|       name       |  VARCHAR   | Название должности             |
|      salary      |  NUMERIC   | Зарплата                       |

### Таблица типов питания (TypeFeed)
Данная таблица хранит данные о типах питания в отеле.  

| Название столбца | Тип данных | Описание                          |
|:----------------:|:----------:|:----------------------------------|
|   typefeed_id    |  SMALLINT  | Индивидуальный номер типа питания |
|       name       |  VARCHAR   | Тип питания                       |
|     content      |  VARCHAR   | Входящие блюда                    |
|       cost       |  NUMERIC   | Стоимость питания за сутки        |

### Таблица типов номеров (TypeRooms)
Данная таблица хранит данные о типах номеров в отеле.  

| Название столбца | Тип данных | Описание                                                                               |
|:----------------:|:----------:|:---------------------------------------------------------------------------------------|
|     type_id      |  SMALLINT  | Индивидуальный номер типа номера                                                       |
|       name       |  VARCHAR   | Тип комнаты                                                                            |
|   number_beds    |  VARCHAR   | Количество спальных мест (SGL - одноместное, DBL - двуместное, QDPL - четырехместный ) |
|   number_rooms   |  SMALLINT  | Количество комнат                                                                      |
|       cost       |  NUMERIC   | Стоимость номера за сутки                                                              |

### Таблица вещей для уборки гостиничных номеров (Storage)
Данная таблица хранит данные о вещах для уборки гостиничных номеров.

| Название столбца | Тип данных | Описание                  |
|:----------------:|:----------:|:--------------------------|
|     thing_id     |  SMALLINT  | Индивидуальный номер вещи |
|       name       |  VARCHAR   | Название вещи             |
|      count       |  SMALLINT  | Количество вещей          |

# Функции
### Добавления должности (PositionUpd)
```sql
SELECT dictionary.positionupd('
{
     "name": "Бухгалтер",
     "salary": 49999.99
}
');
```
Пример ответа при правильном выполнении:
```jsonb
{"data" : null}
```
Примеры ошибок
```jsonb 
{
	"errors": [
	    {
		    "error": "dictionary.position_ins.salary",
		    "detail": "salary = -89.00",
		    "message": "Зарплата не может быть отрицательной!"
    	}
	]
}
```

### Изменение зарплаты у должности (PositionUpd)
Изменение происходит только для поле зарплаты (salary).
```sql
SELECT dictionary.positionupd('
{
  "position_id": 9,
  "name": "Бухгалтер",
  "salary": 47999
}
');
```
Пример ответа при правильном выполнении:
```jsonb
{"data" : null}
```
Примеры ошибок:
```jsonb 
{
	"errors": [
	    {
		    "error": "dictionary.position_ins.salary",
		    "detail": "salary = -89.00",
		    "message": "Зарплата не может быть отрицательной!"
    	}
	]
}
```

### Добавления вещи на склад (StorageUpd)
```sql
SELECT dictionary.storageupd('
{
  "name": "Гель для душа",
  "count": 134
}
');
```
Пример ответа при правильном выполнении:
```jsonb
{"data" : null}
```
Примеры ошибок:
```jsonb 
{
	"errors": [
	    {
		    "error": "dictionary.storage_ins.count",
		    "detail": "count = -67",
		    "message": "Колчество не может быть отрицательным!"
	    }
	]
}
```

### Изменение количество вещей на складе (StorageUpd)
Изменение происходит только для поле количества (count).
```sql
SELECT dictionary.storageupd('
{
  "thing_id": 2,
  "name": "Гель для душа",
  "count": 123
}
');
```
Пример ответа при правильном выполнении:
```jsonb
{"data" : null}
```
Примеры ошибок:
```jsonb 
{
	"errors": [
	    {
		    "error": "dictionary.storage_ins.count",
		    "detail": "count = -67",
		    "message": "Колчество не может быть отрицательным!"
	    }
	]
}
```

### Добавление типа питания (TypeFeedUpd)
```sql
SELECT dictionary.typefeedupd('
{
  "name": "Завтрак",
  "content": "Каша, чай",
  "cost": 274.99
}
');
```
Пример ответа при правильном выполнении:
```jsonb
{"data" : null}
```
Примеры ошибок:
```jsonb 
{
	"errors": [
	    {
		    "error": "dictionary.typefeed_ins.cost",
		    "detail": "cost = -274.99",
		    "message": "Стоимость не может быть отрицательной!"
	    }
	]
}
```

### Изменение описания и стоимости типа питания (TypeFeedUpd)
Изменяется только описание (content) и стоимость типа питания (cost).
```sql
SELECT dictionary.typefeedupd('
{
  "typefeed_id": 1,
  "name": "Завтрак",
  "content": "Каша, чай",
  "cost": 284.99
}
');
```
Пример ответа при правильном выполнении:
```jsonb
{"data" : null}
```
Примеры ошибок:
```jsonb 
{
	"errors": [
	    {
		    "error": "dictionary.typefeed_ins.cost",
		    "detail": "cost = -274.99",
		    "message": "Стоимость не может быть отрицательной!"
	    }
	]
}
```

### Добавление типа комнаты (TypeRoomsUpd)
```sql
SELECT dictionary.typeroomsupd('
{
  "name": "Стандартный номер",
  "number_beds": "SGL",
  "number_rooms": 1,
  "cost": 2799.99
}
');
```
Пример ответа при правильном выполнении:
```jsonb
{"data" : null}
```
Примеры ошибок:
```jsonb 
{
	"errors": [
	    {
		    "error": "dictionary.typerooms_ins.cost",
		    "detail": "cost = -2799.99",
		    "message": "Стоимость не может быть отрицательной!"
	    }
	]
}
```

### Изменение стоимости у типа комнаты (TypeRoomsUpd)
Изменяется только стоимость типа комнаты (cost).
```sql
SELECT dictionary.typeroomsupd('
{
  "type_id": 1,
  "name": "Стандартный номер",
  "number_beds": "SGL",
  "number_rooms": 1,
  "cost": 2699.99
}
');
```
Пример ответа при правильном выполнении:
```jsonb
{"data" : null}
```
Примеры ошибок:
```jsonb 
{
	"errors": [
	    {
		    "error": "dictionary.typerooms_ins.cost",
		    "detail": "cost = -2799.99",
		    "message": "Стоимость не может быть отрицательной!"
	    }
	]
}
```

### Вывод должностей (PositionGet)
На вход есть необязательные параметры, с их помощью осуществляется фильтрация данных.

| Название столбца | Тип данных | Описание                       |
|:----------------:|:----------:|:-------------------------------|
|   _position_id   |    INT     | Индивидуальный номер должности |
```sql
SELECT dictionary.positionget(_position_id := null);
```
Пример ответа при правильном выполнении:
```jsonb
{
	"data": [
	{
		"name": "Управляющий отелем",
		"salary": 259999.00,
		"position_id": 1
	},
	{
		"name": "Старший администратор",
		"salary": 99999.99,
		"position_id": 2
	},
	{
		"name": "Администратор",
		"salary": 69999.99,
		"position_id": 3
	},
	{
		"name": "Заведующий складом",
		"salary": 69999.99,
		"position_id": 4
	},
	{
		"name": "Старшая горничная",
		"salary": 79999.99,
		"position_id": 5
	},
	{
		"name": "Горничная",
		"salary": 49999.99,
		"position_id": 6
	},
	{
		"name": "Менеджер по бронированию",
		"salary": 79999.99,
		"position_id": 7
	},
	{
		"name": "Финансовый директор",
		"salary": 99999.99,
		"position_id": 8
	},
	{
		"name": "Охранник",
		"salary": 49999.99,
		"position_id": 10
	},
	{
		"name": "Сантехник",
		"salary": 49999.99,
		"position_id": 11
	},
	{
		"name": "Бухгалтер",
		"salary": 47999.00,
		"position_id": 9
	}]
}
```

### Вывод вещей на складе (StorageGet)
На вход есть необязательные параметры, с их помощью осуществляется фильтрация данных.

| Название столбца | Тип данных | Описание                  |
|:----------------:|:----------:|:--------------------------|
|    _thing_id     |    INT     | Индивидуальный номер вещи |
```sql
SELECT dictionary.storageget(_thing_id := null);
```
Пример ответа при правильном выполнении:
```jsonb
{
	"data": [
	{
		"name": "Шампунь",
		"count": 111,
		"thing_id": 1
	},
	{
		"name": "Спальный набор",
		"count": 56,
		"thing_id": 3
	},
	{
		"name": "Мыло",
		"count": 160,
		"thing_id": 4
	},
	{
		"name": "Полотенце",
		"count": 67,
		"thing_id": 5
	},
	{
		"name": "Гель для душа",
		"count": 123,
		"thing_id": 2
	}]
}
```

### Вывод типов еды (TypeFeedGet)
На вход есть необязательные параметры, с их помощью осуществляется фильтрация данных.

| Название столбца | Тип данных | Описание                          |
|:----------------:|:----------:|:----------------------------------|
|   _typefeed_id   |    INT     | Индивидуальный номер типа питания |
```sql
SELECT dictionary.typefeedget(_typefeed_id := null);
```
Пример ответа при правильном выполнении:
```jsonb
{
	"data": [
	{
		"cost": 689.99,
		"name": "Завтрак+Обед",
		"content": "Каша, чай + первое блюда, второе блюдо(суп), чай",
		"typefeed_id": 2
	},
	{
		"cost": 899.99,
		"name": "Завтрак+Обед+Ужин",
		"content": "Каша, чай + первое блюда, второе блюдо(суп), чай + горячее блюдо, чай",
		"typefeed_id": 3
	},
	{
		"cost": 284.99,
		"name": "Завтрак",
		"content": "Каша, чай",
		"typefeed_id": 1
	}]
}
```

### Вывод типов комнат (TypeRoomsGet)
На вход есть необязательные параметры, с их помощью осуществляется фильтрация данных.

| Название столбца | Тип данных | Описание                         |
|:----------------:|:----------:|:---------------------------------|
|     _type_id     |    INT     | Индивидуальный номер типа номера |
```sql
SELECT dictionary.typeroomsget(_type_id := null);
```
Пример ответа при правильном выполнении:
```jsonb
{
	"data": [
	{
		"cost": 3199.99,
		"name": "Стандартный номер",
		"type_id": 2,
		"number_beds": "DBL",
		"number_rooms": 1
	},
	{
		"cost": 4799.99,
		"name": "Семейный номер",
		"type_id": 3,
		"number_beds": "QDPL",
		"number_rooms": 2
	},
	{
		"cost": 2699.99,
		"name": "Стандартный номер",
		"type_id": 1,
		"number_beds": "SGL",
		"number_rooms": 1
	}]
}
```